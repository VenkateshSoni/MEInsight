/**
 * Minified by jsDelivr using Terser v3.14.1.
 * Original file: /npm/jstree@3.3.8/src/jstree.contextmenu.js
 * 
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
!function(e){"use strict";"function"==typeof define&&define.amd?define("jstree.contextmenu",["jquery","jstree"],e):"object"==typeof exports?e(require("jquery"),require("jstree")):e(jQuery,jQuery.jstree)}(function(e,t,a){"use strict";e.jstree.plugins.contextmenu||(e.jstree.defaults.contextmenu={select_node:!0,show_at_node:!0,items:function(t,a){return{create:{separator_before:!1,separator_after:!0,_disabled:!1,label:"Create",action:function(t){var a=e.jstree.reference(t.reference),n=a.get_node(t.reference);a.create_node(n,{},"last",function(e){try{a.edit(e)}catch(t){setTimeout(function(){a.edit(e)},0)}})}},rename:{separator_before:!1,separator_after:!1,_disabled:!1,label:"Rename",action:function(t){var a=e.jstree.reference(t.reference),n=a.get_node(t.reference);a.edit(n)}},remove:{separator_before:!1,icon:!1,separator_after:!1,_disabled:!1,label:"Delete",action:function(t){var a=e.jstree.reference(t.reference),n=a.get_node(t.reference);a.is_selected(n)?a.delete_node(a.get_selected()):a.delete_node(n)}},ccp:{separator_before:!0,icon:!1,separator_after:!1,label:"Edit",action:!1,submenu:{cut:{separator_before:!1,separator_after:!1,label:"Cut",action:function(t){var a=e.jstree.reference(t.reference),n=a.get_node(t.reference);a.is_selected(n)?a.cut(a.get_top_selected()):a.cut(n)}},copy:{separator_before:!1,icon:!1,separator_after:!1,label:"Copy",action:function(t){var a=e.jstree.reference(t.reference),n=a.get_node(t.reference);a.is_selected(n)?a.copy(a.get_top_selected()):a.copy(n)}},paste:{separator_before:!1,icon:!1,_disabled:function(t){return!e.jstree.reference(t.reference).can_paste()},separator_after:!1,label:"Paste",action:function(t){var a=e.jstree.reference(t.reference),n=a.get_node(t.reference);a.paste(n)}}}}}}},e.jstree.plugins.contextmenu=function(t,n){this.bind=function(){n.bind.call(this);var t,a,o=0,i=null;this.element.on("init.jstree loading.jstree ready.jstree",e.proxy(function(){this.get_container_ul().addClass("jstree-contextmenu")},this)).on("contextmenu.jstree",".jstree-anchor",e.proxy(function(e,t){"input"!==e.target.tagName.toLowerCase()&&(e.preventDefault(),o=e.ctrlKey?+new Date:0,(t||i)&&(o=+new Date+1e4),i&&clearTimeout(i),this.is_loading(e.currentTarget)||this.show_contextmenu(e.currentTarget,e.pageX,e.pageY,e))},this)).on("click.jstree",".jstree-anchor",e.proxy(function(t){this._data.contextmenu.visible&&(!o||+new Date-o>250)&&e.vakata.context.hide(),o=0},this)).on("touchstart.jstree",".jstree-anchor",function(n){n.originalEvent&&n.originalEvent.changedTouches&&n.originalEvent.changedTouches[0]&&(t=n.originalEvent.changedTouches[0].clientX,a=n.originalEvent.changedTouches[0].clientY,i=setTimeout(function(){e(n.currentTarget).trigger("contextmenu",!0)},750))}).on("touchmove.vakata.jstree",function(n){i&&n.originalEvent&&n.originalEvent.changedTouches&&n.originalEvent.changedTouches[0]&&(Math.abs(t-n.originalEvent.changedTouches[0].clientX)>10||Math.abs(a-n.originalEvent.changedTouches[0].clientY)>10)&&(clearTimeout(i),e.vakata.context.hide())}).on("touchend.vakata.jstree",function(e){i&&clearTimeout(i)}),e(document).on("context_hide.vakata.jstree",e.proxy(function(t,a){this._data.contextmenu.visible=!1,e(a.reference).removeClass("jstree-context")},this))},this.teardown=function(){this._data.contextmenu.visible&&e.vakata.context.hide(),n.teardown.call(this)},this.show_contextmenu=function(t,n,o,i){if(!(t=this.get_node(t))||t.id===e.jstree.root)return!1;var s=this.settings.contextmenu,r=this.get_node(t,!0).children(".jstree-anchor"),c=!1,l=!1;(s.show_at_node||n===a||o===a)&&(c=r.offset(),n=c.left,o=c.top+this._data.core.li_height),this.settings.contextmenu.select_node&&!this.is_selected(t)&&this.activate_node(t,i),l=s.items,e.isFunction(l)&&(l=l.call(this,t,e.proxy(function(e){this._show_contextmenu(t,n,o,e)},this))),e.isPlainObject(l)&&this._show_contextmenu(t,n,o,l)},this._show_contextmenu=function(t,a,n,o){var i=this.get_node(t,!0).children(".jstree-anchor");e(document).one("context_show.vakata.jstree",e.proxy(function(t,a){var n="jstree-contextmenu jstree-"+this.get_theme()+"-contextmenu";e(a.element).addClass(n),i.addClass("jstree-context")},this)),this._data.contextmenu.visible=!0,e.vakata.context.show(i,{x:a,y:n},o),this.trigger("show_contextmenu",{node:t,x:a,y:n})}},function(e){var t=!1,a={element:!1,reference:!1,position_x:0,position_y:0,items:[],html:"",is_visible:!1};e.vakata.context={settings:{hide_onmouseleave:0,icons:!0},_trigger:function(t){e(document).triggerHandler("context_"+t+".vakata",{reference:a.reference,element:a.element,position:{x:a.position_x,y:a.position_y}})},_execute:function(t){return!(!(t=a.items[t])||t._disabled&&(!e.isFunction(t._disabled)||t._disabled({item:t,reference:a.reference,element:a.element}))||!t.action)&&t.action.call(null,{item:t,reference:a.reference,element:a.element,position:{x:a.position_x,y:a.position_y}})},_parse:function(t,n){if(!t)return!1;n||(a.html="",a.items=[]);var o,i="",s=!1;return n&&(i+="<ul>"),e.each(t,function(t,n){if(!n)return!0;a.items.push(n),!s&&n.separator_before&&(i+="<li class='vakata-context-separator'><a href='#' "+(e.vakata.context.settings.icons?"":'style="margin-left:0px;"')+">&#160;</a></li>"),s=!1,i+="<li class='"+(n._class||"")+(!0===n._disabled||e.isFunction(n._disabled)&&n._disabled({item:n,reference:a.reference,element:a.element})?" vakata-contextmenu-disabled ":"")+"' "+(n.shortcut?" data-shortcut='"+n.shortcut+"' ":"")+">",i+="<a href='#' rel='"+(a.items.length-1)+"' "+(n.title?"title='"+n.title+"'":"")+">",e.vakata.context.settings.icons&&(i+="<i ",n.icon&&(-1!==n.icon.indexOf("/")||-1!==n.icon.indexOf(".")?i+=" style='background:url(\""+n.icon+"\") center center no-repeat' ":i+=" class='"+n.icon+"' "),i+="></i><span class='vakata-contextmenu-sep'>&#160;</span>"),i+=(e.isFunction(n.label)?n.label({item:t,reference:a.reference,element:a.element}):n.label)+(n.shortcut?' <span class="vakata-contextmenu-shortcut vakata-contextmenu-shortcut-'+n.shortcut+'">'+(n.shortcut_label||"")+"</span>":"")+"</a>",n.submenu&&(o=e.vakata.context._parse(n.submenu,!0))&&(i+=o),i+="</li>",n.separator_after&&(i+="<li class='vakata-context-separator'><a href='#' "+(e.vakata.context.settings.icons?"":'style="margin-left:0px;"')+">&#160;</a></li>",s=!0)}),i=i.replace(/<li class\='vakata-context-separator'\><\/li\>$/,""),n&&(i+="</ul>"),n||(a.html=i,e.vakata.context._trigger("parse")),i.length>10&&i},_show_submenu:function(a){if((a=e(a)).length&&a.children("ul").length){var n=a.children("ul"),o=a.offset().left,i=o+a.outerWidth(),s=a.offset().top,r=n.width(),c=n.height(),l=e(window).width()+e(window).scrollLeft(),d=e(window).height()+e(window).scrollTop();t?a[i-(r+10+a.outerWidth())<0?"addClass":"removeClass"]("vakata-context-left"):a[i+r>l&&o>l-i?"addClass":"removeClass"]("vakata-context-right"),s+c+10>d&&n.css("bottom","-1px"),a.hasClass("vakata-context-right")?o<r&&n.css("margin-right",o-r):l-i<r&&n.css("margin-left",l-i-r),n.show()}},show:function(n,o,i){var s,r,c,l,d,u,h,f;switch(a.element&&a.element.length&&a.element.width(""),!0){case!o&&!n:return!1;case!!o&&!!n:a.reference=n,a.position_x=o.x,a.position_y=o.y;break;case!o&&!!n:a.reference=n,s=n.offset(),a.position_x=s.left+n.outerHeight(),a.position_y=s.top;break;case!!o&&!n:a.position_x=o.x,a.position_y=o.y}n&&!i&&e(n).data("vakata_contextmenu")&&(i=e(n).data("vakata_contextmenu")),e.vakata.context._parse(i)&&a.element.html(a.html),a.items.length&&(a.element.appendTo(document.body),r=a.element,c=a.position_x,l=a.position_y,d=r.width(),u=r.height(),h=e(window).width()+e(window).scrollLeft(),f=e(window).height()+e(window).scrollTop(),t&&(c-=r.outerWidth()-e(n).outerWidth())<e(window).scrollLeft()+20&&(c=e(window).scrollLeft()+20),c+d+20>h&&(c=h-(d+20)),l+u+20>f&&(l=f-(u+20)),a.element.css({left:c,top:l}).show().find("a").first().focus().parent().addClass("vakata-context-hover"),a.is_visible=!0,e.vakata.context._trigger("show"))},hide:function(){a.is_visible&&(a.element.hide().find("ul").hide().end().find(":focus").blur().end().detach(),a.is_visible=!1,e.vakata.context._trigger("hide"))}},e(function(){t="rtl"===e(document.body).css("direction");var n=!1;a.element=e("<ul class='vakata-context'></ul>"),a.element.on("mouseenter","li",function(t){t.stopImmediatePropagation(),e.contains(this,t.relatedTarget)||(n&&clearTimeout(n),a.element.find(".vakata-context-hover").removeClass("vakata-context-hover").end(),e(this).siblings().find("ul").hide().end().end().parentsUntil(".vakata-context","li").addBack().addClass("vakata-context-hover"),e.vakata.context._show_submenu(this))}).on("mouseleave","li",function(t){e.contains(this,t.relatedTarget)||e(this).find(".vakata-context-hover").addBack().removeClass("vakata-context-hover")}).on("mouseleave",function(t){e(this).find(".vakata-context-hover").removeClass("vakata-context-hover"),e.vakata.context.settings.hide_onmouseleave&&(n=setTimeout(function(){e.vakata.context.hide()},e.vakata.context.settings.hide_onmouseleave))}).on("click","a",function(t){t.preventDefault(),e(this).blur().parent().hasClass("vakata-context-disabled")||!1===e.vakata.context._execute(e(this).attr("rel"))||e.vakata.context.hide()}).on("keydown","a",function(t){var n=null;switch(t.which){case 13:case 32:t.type="click",t.preventDefault(),e(t.currentTarget).trigger(t);break;case 37:a.is_visible&&(a.element.find(".vakata-context-hover").last().closest("li").first().find("ul").hide().find(".vakata-context-hover").removeClass("vakata-context-hover").end().end().children("a").focus(),t.stopImmediatePropagation(),t.preventDefault());break;case 38:a.is_visible&&((n=a.element.find("ul:visible").addBack().last().children(".vakata-context-hover").removeClass("vakata-context-hover").prevAll("li:not(.vakata-context-separator)").first()).length||(n=a.element.find("ul:visible").addBack().last().children("li:not(.vakata-context-separator)").last()),n.addClass("vakata-context-hover").children("a").focus(),t.stopImmediatePropagation(),t.preventDefault());break;case 39:a.is_visible&&(a.element.find(".vakata-context-hover").last().children("ul").show().children("li:not(.vakata-context-separator)").removeClass("vakata-context-hover").first().addClass("vakata-context-hover").children("a").focus(),t.stopImmediatePropagation(),t.preventDefault());break;case 40:a.is_visible&&((n=a.element.find("ul:visible").addBack().last().children(".vakata-context-hover").removeClass("vakata-context-hover").nextAll("li:not(.vakata-context-separator)").first()).length||(n=a.element.find("ul:visible").addBack().last().children("li:not(.vakata-context-separator)").first()),n.addClass("vakata-context-hover").children("a").focus(),t.stopImmediatePropagation(),t.preventDefault());break;case 27:e.vakata.context.hide(),t.preventDefault()}}).on("keydown",function(e){e.preventDefault();var t=a.element.find(".vakata-contextmenu-shortcut-"+e.which).parent();t.parent().not(".vakata-context-disabled")&&t.click()}),e(document).on("mousedown.vakata.jstree",function(t){a.is_visible&&a.element[0]!==t.target&&!e.contains(a.element[0],t.target)&&e.vakata.context.hide()}).on("context_show.vakata.jstree",function(e,n){a.element.find("li:has(ul)").children("a").addClass("vakata-context-parent"),t&&a.element.addClass("vakata-context-rtl").css("direction","rtl"),a.element.find("ul").hide().end()})})}(e))});
//# sourceMappingURL=/sm/ad8d5d7ad1883e409f6011424d7b8fe2860d92bd1905f788f410807514c10566.map