/**
 * Minified by jsDelivr using Terser v3.14.1.
 * Original file: /npm/jstree@3.3.8/src/jstree.checkbox.js
 * 
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
!function(e){"use strict";"function"==typeof define&&define.amd?define("jstree.checkbox",["jquery","jstree"],e):"object"==typeof exports?e(require("jquery"),require("jstree")):e(jQuery,jQuery.jstree)}(function(e,t,s){"use strict";if(!e.jstree.plugins.checkbox){var c=document.createElement("I");c.className="jstree-icon jstree-checkbox",c.setAttribute("role","presentation"),e.jstree.defaults.checkbox={visible:!0,three_state:!0,whole_node:!0,keep_selected_style:!0,cascade:"",tie_selection:!0,cascade_to_disabled:!0,cascade_to_hidden:!0},e.jstree.plugins.checkbox=function(t,i){this.bind=function(){i.bind.call(this),this._data.checkbox.uto=!1,this._data.checkbox.selected=[],this.settings.checkbox.three_state&&(this.settings.checkbox.cascade="up+down+undetermined"),this.element.on("init.jstree",e.proxy(function(){this._data.checkbox.visible=this.settings.checkbox.visible,this.settings.checkbox.keep_selected_style||this.element.addClass("jstree-checkbox-no-clicked"),this.settings.checkbox.tie_selection&&this.element.addClass("jstree-checkbox-selection")},this)).on("loading.jstree",e.proxy(function(){this[this._data.checkbox.visible?"show_checkboxes":"hide_checkboxes"]()},this)),-1!==this.settings.checkbox.cascade.indexOf("undetermined")&&this.element.on("changed.jstree uncheck_node.jstree check_node.jstree uncheck_all.jstree check_all.jstree move_node.jstree copy_node.jstree redraw.jstree open_node.jstree",e.proxy(function(){this._data.checkbox.uto&&clearTimeout(this._data.checkbox.uto),this._data.checkbox.uto=setTimeout(e.proxy(this._undetermined,this),50)},this)),this.settings.checkbox.tie_selection||this.element.on("model.jstree",e.proxy(function(e,t){var s,c,i=this._model.data,d=(i[t.parent],t.nodes);for(s=0,c=d.length;s<c;s++)i[d[s]].state.checked=i[d[s]].state.checked||i[d[s]].original&&i[d[s]].original.state&&i[d[s]].original.state.checked,i[d[s]].state.checked&&this._data.checkbox.selected.push(d[s])},this)),-1===this.settings.checkbox.cascade.indexOf("up")&&-1===this.settings.checkbox.cascade.indexOf("down")||this.element.on("model.jstree",e.proxy(function(t,s){var c,i,d,h,n,r,a=this._model.data,o=a[s.parent],l=s.nodes,_=[],k=this.settings.checkbox.cascade,g=this.settings.checkbox.tie_selection;if(-1!==k.indexOf("down"))if(o.state[g?"selected":"checked"]){for(i=0,d=l.length;i<d;i++)a[l[i]].state[g?"selected":"checked"]=!0;this._data[g?"core":"checkbox"].selected=this._data[g?"core":"checkbox"].selected.concat(l)}else for(i=0,d=l.length;i<d;i++)if(a[l[i]].state[g?"selected":"checked"]){for(h=0,n=a[l[i]].children_d.length;h<n;h++)a[a[l[i]].children_d[h]].state[g?"selected":"checked"]=!0;this._data[g?"core":"checkbox"].selected=this._data[g?"core":"checkbox"].selected.concat(a[l[i]].children_d)}if(-1!==k.indexOf("up")){for(i=0,d=o.children_d.length;i<d;i++)a[o.children_d[i]].children.length||_.push(a[o.children_d[i]].parent);for(h=0,n=(_=e.vakata.array_unique(_)).length;h<n;h++)for(o=a[_[h]];o&&o.id!==e.jstree.root;){for(c=0,i=0,d=o.children.length;i<d;i++)c+=a[o.children[i]].state[g?"selected":"checked"];if(c!==d)break;o.state[g?"selected":"checked"]=!0,this._data[g?"core":"checkbox"].selected.push(o.id),(r=this.get_node(o,!0))&&r.length&&r.attr("aria-selected",!0).children(".jstree-anchor").addClass(g?"jstree-clicked":"jstree-checked"),o=this.get_node(o.parent)}}this._data[g?"core":"checkbox"].selected=e.vakata.array_unique(this._data[g?"core":"checkbox"].selected)},this)).on(this.settings.checkbox.tie_selection?"select_node.jstree":"check_node.jstree",e.proxy(function(t,s){var c,i,d,h,n=s.node,r=this._model.data,a=this.get_node(n.parent),o=this.settings.checkbox.cascade,l=this.settings.checkbox.tie_selection,_={},k=this._data[l?"core":"checkbox"].selected;for(c=0,i=k.length;c<i;c++)_[k[c]]=!0;if(-1!==o.indexOf("down")){var g=this._cascade_new_checked_state(n.id,!0),u=n.children_d.concat(n.id);for(c=0,i=u.length;c<i;c++)g.indexOf(u[c])>-1?_[u[c]]=!0:delete _[u[c]]}if(-1!==o.indexOf("up"))for(;a&&a.id!==e.jstree.root;){for(d=0,c=0,i=a.children.length;c<i;c++)d+=r[a.children[c]].state[l?"selected":"checked"];if(d!==i)break;a.state[l?"selected":"checked"]=!0,_[a.id]=!0,(h=this.get_node(a,!0))&&h.length&&h.attr("aria-selected",!0).children(".jstree-anchor").addClass(l?"jstree-clicked":"jstree-checked"),a=this.get_node(a.parent)}for(c in k=[],_)_.hasOwnProperty(c)&&k.push(c);this._data[l?"core":"checkbox"].selected=k},this)).on(this.settings.checkbox.tie_selection?"deselect_all.jstree":"uncheck_all.jstree",e.proxy(function(t,s){var c,i,d,h=this.get_node(e.jstree.root),n=this._model.data;for(c=0,i=h.children_d.length;c<i;c++)(d=n[h.children_d[c]])&&d.original&&d.original.state&&d.original.state.undetermined&&(d.original.state.undetermined=!1)},this)).on(this.settings.checkbox.tie_selection?"deselect_node.jstree":"uncheck_node.jstree",e.proxy(function(t,s){var c,i,d,h=s.node,n=(this.get_node(h,!0),this.settings.checkbox.cascade),r=this.settings.checkbox.tie_selection,a=this._data[r?"core":"checkbox"].selected,o=h.children_d.concat(h.id);if(-1!==n.indexOf("down")){var l=this._cascade_new_checked_state(h.id,!1);a=e.vakata.array_filter(a,function(e){return-1===o.indexOf(e)||l.indexOf(e)>-1})}if(-1!==n.indexOf("up")&&-1===a.indexOf(h.id)){for(c=0,i=h.parents.length;c<i;c++)(d=this._model.data[h.parents[c]]).state[r?"selected":"checked"]=!1,d&&d.original&&d.original.state&&d.original.state.undetermined&&(d.original.state.undetermined=!1),(d=this.get_node(h.parents[c],!0))&&d.length&&d.attr("aria-selected",!1).children(".jstree-anchor").removeClass(r?"jstree-clicked":"jstree-checked");a=e.vakata.array_filter(a,function(e){return-1===h.parents.indexOf(e)})}this._data[r?"core":"checkbox"].selected=a},this)),-1!==this.settings.checkbox.cascade.indexOf("up")&&this.element.on("delete_node.jstree",e.proxy(function(t,s){for(var c,i,d,h,n=this.get_node(s.parent),r=this._model.data,a=this.settings.checkbox.tie_selection;n&&n.id!==e.jstree.root&&!n.state[a?"selected":"checked"];){for(d=0,c=0,i=n.children.length;c<i;c++)d+=r[n.children[c]].state[a?"selected":"checked"];if(!(i>0&&d===i))break;n.state[a?"selected":"checked"]=!0,this._data[a?"core":"checkbox"].selected.push(n.id),(h=this.get_node(n,!0))&&h.length&&h.attr("aria-selected",!0).children(".jstree-anchor").addClass(a?"jstree-clicked":"jstree-checked"),n=this.get_node(n.parent)}},this)).on("move_node.jstree",e.proxy(function(t,s){var c,i,d,h,n,r=s.is_multi,a=s.old_parent,o=this.get_node(s.parent),l=this._model.data,_=this.settings.checkbox.tie_selection;if(!r)for(c=this.get_node(a);c&&c.id!==e.jstree.root&&!c.state[_?"selected":"checked"];){for(i=0,d=0,h=c.children.length;d<h;d++)i+=l[c.children[d]].state[_?"selected":"checked"];if(!(h>0&&i===h))break;c.state[_?"selected":"checked"]=!0,this._data[_?"core":"checkbox"].selected.push(c.id),(n=this.get_node(c,!0))&&n.length&&n.attr("aria-selected",!0).children(".jstree-anchor").addClass(_?"jstree-clicked":"jstree-checked"),c=this.get_node(c.parent)}for(c=o;c&&c.id!==e.jstree.root;){for(i=0,d=0,h=c.children.length;d<h;d++)i+=l[c.children[d]].state[_?"selected":"checked"];if(i===h)c.state[_?"selected":"checked"]||(c.state[_?"selected":"checked"]=!0,this._data[_?"core":"checkbox"].selected.push(c.id),(n=this.get_node(c,!0))&&n.length&&n.attr("aria-selected",!0).children(".jstree-anchor").addClass(_?"jstree-clicked":"jstree-checked"));else{if(!c.state[_?"selected":"checked"])break;c.state[_?"selected":"checked"]=!1,this._data[_?"core":"checkbox"].selected=e.vakata.array_remove_item(this._data[_?"core":"checkbox"].selected,c.id),(n=this.get_node(c,!0))&&n.length&&n.attr("aria-selected",!1).children(".jstree-anchor").removeClass(_?"jstree-clicked":"jstree-checked")}c=this.get_node(c.parent)}},this))},this.get_undetermined=function(t){if(-1===this.settings.checkbox.cascade.indexOf("undetermined"))return[];var c,i,d,h,n={},r=this._model.data,a=this.settings.checkbox.tie_selection,o=this._data[a?"core":"checkbox"].selected,l=[],_=this,k=[];for(c=0,i=o.length;c<i;c++)if(r[o[c]]&&r[o[c]].parents)for(d=0,h=r[o[c]].parents.length;d<h&&n[r[o[c]].parents[d]]===s;d++)r[o[c]].parents[d]!==e.jstree.root&&(n[r[o[c]].parents[d]]=!0,l.push(r[o[c]].parents[d]));for(this.element.find(".jstree-closed").not(":has(.jstree-children)").each(function(){var t,a=_.get_node(this);if(a)if(a.state.loaded){for(c=0,i=a.children_d.length;c<i;c++)if(!(t=r[a.children_d[c]]).state.loaded&&t.original&&t.original.state&&t.original.state.undetermined&&!0===t.original.state.undetermined)for(n[t.id]===s&&t.id!==e.jstree.root&&(n[t.id]=!0,l.push(t.id)),d=0,h=t.parents.length;d<h;d++)n[t.parents[d]]===s&&t.parents[d]!==e.jstree.root&&(n[t.parents[d]]=!0,l.push(t.parents[d]))}else if(a.original&&a.original.state&&a.original.state.undetermined&&!0===a.original.state.undetermined)for(n[a.id]===s&&a.id!==e.jstree.root&&(n[a.id]=!0,l.push(a.id)),d=0,h=a.parents.length;d<h;d++)n[a.parents[d]]===s&&a.parents[d]!==e.jstree.root&&(n[a.parents[d]]=!0,l.push(a.parents[d]))}),c=0,i=l.length;c<i;c++)r[l[c]].state[a?"selected":"checked"]||k.push(t?r[l[c]]:l[c]);return k},this._undetermined=function(){if(null!==this.element){var e,t,s,c=this.get_undetermined(!1);for(this.element.find(".jstree-undetermined").removeClass("jstree-undetermined"),e=0,t=c.length;e<t;e++)(s=this.get_node(c[e],!0))&&s.length&&s.children(".jstree-anchor").children(".jstree-checkbox").addClass("jstree-undetermined")}},this.redraw_node=function(t,s,d,h){if(t=i.redraw_node.apply(this,arguments)){var n,r,a=null,o=null;for(n=0,r=t.childNodes.length;n<r;n++)if(t.childNodes[n]&&t.childNodes[n].className&&-1!==t.childNodes[n].className.indexOf("jstree-anchor")){a=t.childNodes[n];break}a&&(!this.settings.checkbox.tie_selection&&this._model.data[t.id].state.checked&&(a.className+=" jstree-checked"),o=c.cloneNode(!1),this._model.data[t.id].state.checkbox_disabled&&(o.className+=" jstree-checkbox-disabled"),a.insertBefore(o,a.childNodes[0]))}return d||-1===this.settings.checkbox.cascade.indexOf("undetermined")||(this._data.checkbox.uto&&clearTimeout(this._data.checkbox.uto),this._data.checkbox.uto=setTimeout(e.proxy(this._undetermined,this),50)),t},this.show_checkboxes=function(){this._data.core.themes.checkboxes=!0,this.get_container_ul().removeClass("jstree-no-checkboxes")},this.hide_checkboxes=function(){this._data.core.themes.checkboxes=!1,this.get_container_ul().addClass("jstree-no-checkboxes")},this.toggle_checkboxes=function(){this._data.core.themes.checkboxes?this.hide_checkboxes():this.show_checkboxes()},this.is_undetermined=function(t){t=this.get_node(t);var s,c,i=this.settings.checkbox.cascade,d=this.settings.checkbox.tie_selection,h=this._data[d?"core":"checkbox"].selected,n=this._model.data;if(!t||!0===t.state[d?"selected":"checked"]||-1===i.indexOf("undetermined")||-1===i.indexOf("down")&&-1===i.indexOf("up"))return!1;if(!t.state.loaded&&!0===t.original.state.undetermined)return!0;for(s=0,c=t.children_d.length;s<c;s++)if(-1!==e.inArray(t.children_d[s],h)||!n[t.children_d[s]].state.loaded&&n[t.children_d[s]].original.state.undetermined)return!0;return!1},this.disable_checkbox=function(t){var s,c,i;if(e.isArray(t)){for(s=0,c=(t=t.slice()).length;s<c;s++)this.disable_checkbox(t[s]);return!0}if(!(t=this.get_node(t))||t.id===e.jstree.root)return!1;i=this.get_node(t,!0),t.state.checkbox_disabled||(t.state.checkbox_disabled=!0,i&&i.length&&i.children(".jstree-anchor").children(".jstree-checkbox").addClass("jstree-checkbox-disabled"),this.trigger("disable_checkbox",{node:t}))},this.enable_checkbox=function(t){var s,c,i;if(e.isArray(t)){for(s=0,c=(t=t.slice()).length;s<c;s++)this.enable_checkbox(t[s]);return!0}if(!(t=this.get_node(t))||t.id===e.jstree.root)return!1;i=this.get_node(t,!0),t.state.checkbox_disabled&&(t.state.checkbox_disabled=!1,i&&i.length&&i.children(".jstree-anchor").children(".jstree-checkbox").removeClass("jstree-checkbox-disabled"),this.trigger("enable_checkbox",{node:t}))},this.activate_node=function(t,s){return!e(s.target).hasClass("jstree-checkbox-disabled")&&(this.settings.checkbox.tie_selection&&(this.settings.checkbox.whole_node||e(s.target).hasClass("jstree-checkbox"))&&(s.ctrlKey=!0),this.settings.checkbox.tie_selection||!this.settings.checkbox.whole_node&&!e(s.target).hasClass("jstree-checkbox")?i.activate_node.call(this,t,s):!this.is_disabled(t)&&(this.is_checked(t)?this.uncheck_node(t,s):this.check_node(t,s),void this.trigger("activate_node",{node:this.get_node(t)})))},this._cascade_new_checked_state=function(e,t){var s,c,i,d=this.settings.checkbox.tie_selection,h=this._model.data[e],n=[],r=[];if(!this.settings.checkbox.cascade_to_disabled&&h.state.disabled||!this.settings.checkbox.cascade_to_hidden&&h.state.hidden)i=this.get_checked_descendants(e),h.state[d?"selected":"checked"]&&i.push(h.id),n=n.concat(i);else{if(h.children)for(s=0,c=h.children.length;s<c;s++){var a=h.children[s];i=this._cascade_new_checked_state(a,t),n=n.concat(i),i.indexOf(a)>-1&&r.push(a)}var o=this.get_node(h,!0),l=r.length>0&&r.length<h.children.length;h.original&&h.original.state&&h.original.state.undetermined&&(h.original.state.undetermined=l),l?(h.state[d?"selected":"checked"]=!1,o.attr("aria-selected",!1).children(".jstree-anchor").removeClass(d?"jstree-clicked":"jstree-checked")):t&&r.length===h.children.length?(h.state[d?"selected":"checked"]=t,n.push(h.id),o.attr("aria-selected",!0).children(".jstree-anchor").addClass(d?"jstree-clicked":"jstree-checked")):(h.state[d?"selected":"checked"]=!1,o.attr("aria-selected",!1).children(".jstree-anchor").removeClass(d?"jstree-clicked":"jstree-checked"))}return n},this.get_checked_descendants=function(t){var s=this,c=s.settings.checkbox.tie_selection,i=s._model.data[t];return e.vakata.array_filter(i.children_d,function(e){return s._model.data[e].state[c?"selected":"checked"]})},this.check_node=function(t,s){if(this.settings.checkbox.tie_selection)return this.select_node(t,!1,!0,s);var c,i,d;if(e.isArray(t)){for(i=0,d=(t=t.slice()).length;i<d;i++)this.check_node(t[i],s);return!0}if(!(t=this.get_node(t))||t.id===e.jstree.root)return!1;c=this.get_node(t,!0),t.state.checked||(t.state.checked=!0,this._data.checkbox.selected.push(t.id),c&&c.length&&c.children(".jstree-anchor").addClass("jstree-checked"),this.trigger("check_node",{node:t,selected:this._data.checkbox.selected,event:s}))},this.uncheck_node=function(t,s){if(this.settings.checkbox.tie_selection)return this.deselect_node(t,!1,s);var c,i,d;if(e.isArray(t)){for(c=0,i=(t=t.slice()).length;c<i;c++)this.uncheck_node(t[c],s);return!0}if(!(t=this.get_node(t))||t.id===e.jstree.root)return!1;d=this.get_node(t,!0),t.state.checked&&(t.state.checked=!1,this._data.checkbox.selected=e.vakata.array_remove_item(this._data.checkbox.selected,t.id),d.length&&d.children(".jstree-anchor").removeClass("jstree-checked"),this.trigger("uncheck_node",{node:t,selected:this._data.checkbox.selected,event:s}))},this.check_all=function(){if(this.settings.checkbox.tie_selection)return this.select_all();var t,s;this._data.checkbox.selected.concat([]);for(this._data.checkbox.selected=this._model.data[e.jstree.root].children_d.concat(),t=0,s=this._data.checkbox.selected.length;t<s;t++)this._model.data[this._data.checkbox.selected[t]]&&(this._model.data[this._data.checkbox.selected[t]].state.checked=!0);this.redraw(!0),this.trigger("check_all",{selected:this._data.checkbox.selected})},this.uncheck_all=function(){if(this.settings.checkbox.tie_selection)return this.deselect_all();var e,t,s=this._data.checkbox.selected.concat([]);for(e=0,t=this._data.checkbox.selected.length;e<t;e++)this._model.data[this._data.checkbox.selected[e]]&&(this._model.data[this._data.checkbox.selected[e]].state.checked=!1);this._data.checkbox.selected=[],this.element.find(".jstree-checked").removeClass("jstree-checked"),this.trigger("uncheck_all",{selected:this._data.checkbox.selected,node:s})},this.is_checked=function(t){return this.settings.checkbox.tie_selection?this.is_selected(t):!(!(t=this.get_node(t))||t.id===e.jstree.root)&&t.state.checked},this.get_checked=function(t){return this.settings.checkbox.tie_selection?this.get_selected(t):t?e.map(this._data.checkbox.selected,e.proxy(function(e){return this.get_node(e)},this)):this._data.checkbox.selected.slice()},this.get_top_checked=function(t){if(this.settings.checkbox.tie_selection)return this.get_top_selected(t);var s,c,i,d,h=this.get_checked(!0),n={};for(s=0,c=h.length;s<c;s++)n[h[s].id]=h[s];for(s=0,c=h.length;s<c;s++)for(i=0,d=h[s].children_d.length;i<d;i++)n[h[s].children_d[i]]&&delete n[h[s].children_d[i]];for(s in h=[],n)n.hasOwnProperty(s)&&h.push(s);return t?e.map(h,e.proxy(function(e){return this.get_node(e)},this)):h},this.get_bottom_checked=function(t){if(this.settings.checkbox.tie_selection)return this.get_bottom_selected(t);var s,c,i=this.get_checked(!0),d=[];for(s=0,c=i.length;s<c;s++)i[s].children.length||d.push(i[s].id);return t?e.map(d,e.proxy(function(e){return this.get_node(e)},this)):d},this.load_node=function(t,s){var c,d,h;if(!e.isArray(t)&&!this.settings.checkbox.tie_selection&&(h=this.get_node(t))&&h.state.loaded)for(c=0,d=h.children_d.length;c<d;c++)this._model.data[h.children_d[c]].state.checked&&(!0,this._data.checkbox.selected=e.vakata.array_remove_item(this._data.checkbox.selected,h.children_d[c]));return i.load_node.apply(this,arguments)},this.get_state=function(){var e=i.get_state.apply(this,arguments);return this.settings.checkbox.tie_selection?e:(e.checkbox=this._data.checkbox.selected.slice(),e)},this.set_state=function(t,s){var c=i.set_state.apply(this,arguments);if(c&&t.checkbox){if(!this.settings.checkbox.tie_selection){this.uncheck_all();var d=this;e.each(t.checkbox,function(e,t){d.check_node(t)})}return delete t.checkbox,this.set_state(t,s),!1}return c},this.refresh=function(e,t){return this.settings.checkbox.tie_selection&&(this._data.checkbox.selected=[]),i.refresh.apply(this,arguments)}}}});
//# sourceMappingURL=/sm/d69808838c85f4a77716b2674340460b93b4c2c8e9013dbe448f9b48b6a703fa.map