/**
 * Minified by jsDelivr using Terser v3.14.1.
 * Original file: /npm/jstree@3.3.8/src/jstree.types.js
 * 
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
!function(t){"use strict";"function"==typeof define&&define.amd?define("jstree.types",["jquery","jstree"],t):"object"==typeof exports?t(require("jquery"),require("jstree")):t(jQuery,jQuery.jstree)}(function(t,e,r){"use strict";t.jstree.plugins.types||(t.jstree.defaults.types={default:{}},t.jstree.defaults.types[t.jstree.root]={},t.jstree.plugins.types=function(e,i){this.init=function(e,a){var s,d;if(a&&a.types&&a.types.default)for(s in a.types)if("default"!==s&&s!==t.jstree.root&&a.types.hasOwnProperty(s))for(d in a.types.default)a.types.default.hasOwnProperty(d)&&a.types[s][d]===r&&(a.types[s][d]=a.types.default[d]);i.init.call(this,e,a),this._model.data[t.jstree.root].type=t.jstree.root},this.refresh=function(e,r){i.refresh.call(this,e,r),this._model.data[t.jstree.root].type=t.jstree.root},this.bind=function(){this.element.on("model.jstree",t.proxy(function(e,i){var a,s,d,n=this._model.data,l=i.nodes,_=this.settings.types,o="default";for(a=0,s=l.length;a<s;a++){if(o="default",n[l[a]].original&&n[l[a]].original.type&&_[n[l[a]].original.type]&&(o=n[l[a]].original.type),n[l[a]].data&&n[l[a]].data.jstree&&n[l[a]].data.jstree.type&&_[n[l[a]].data.jstree.type]&&(o=n[l[a]].data.jstree.type),n[l[a]].type=o,!0===n[l[a]].icon&&_[o].icon!==r&&(n[l[a]].icon=_[o].icon),_[o].li_attr!==r&&"object"==typeof _[o].li_attr)for(d in _[o].li_attr)if(_[o].li_attr.hasOwnProperty(d)){if("id"===d)continue;n[l[a]].li_attr[d]===r?n[l[a]].li_attr[d]=_[o].li_attr[d]:"class"===d&&(n[l[a]].li_attr.class=_[o].li_attr.class+" "+n[l[a]].li_attr.class)}if(_[o].a_attr!==r&&"object"==typeof _[o].a_attr)for(d in _[o].a_attr)if(_[o].a_attr.hasOwnProperty(d)){if("id"===d)continue;n[l[a]].a_attr[d]===r?n[l[a]].a_attr[d]=_[o].a_attr[d]:"href"===d&&"#"===n[l[a]].a_attr[d]?n[l[a]].a_attr.href=_[o].a_attr.href:"class"===d&&(n[l[a]].a_attr.class=_[o].a_attr.class+" "+n[l[a]].a_attr.class)}}n[t.jstree.root].type=t.jstree.root},this)),i.bind.call(this)},this.get_json=function(e,r,a){var s,d,n=this._model.data,l=r?t.extend(!0,{},r,{no_id:!1}):{},_=i.get_json.call(this,e,l,a);if(!1===_)return!1;if(t.isArray(_))for(s=0,d=_.length;s<d;s++)_[s].type=_[s].id&&n[_[s].id]&&n[_[s].id].type?n[_[s].id].type:"default",r&&r.no_id&&(delete _[s].id,_[s].li_attr&&_[s].li_attr.id&&delete _[s].li_attr.id,_[s].a_attr&&_[s].a_attr.id&&delete _[s].a_attr.id);else _.type=_.id&&n[_.id]&&n[_.id].type?n[_.id].type:"default",r&&r.no_id&&(_=this._delete_ids(_));return _},this._delete_ids=function(e){if(t.isArray(e)){for(var r=0,i=e.length;r<i;r++)e[r]=this._delete_ids(e[r]);return e}return delete e.id,e.li_attr&&e.li_attr.id&&delete e.li_attr.id,e.a_attr&&e.a_attr.id&&delete e.a_attr.id,e.children&&t.isArray(e.children)&&(e.children=this._delete_ids(e.children)),e},this.check=function(e,a,s,d,n){if(!1===i.check.call(this,e,a,s,d,n))return!1;a=a&&a.id?a:this.get_node(a),s=s&&s.id?s:this.get_node(s);var l,_,o,c,h=a&&a.id?n&&n.origin?n.origin:t.jstree.reference(a.id):null;switch(h=h&&h._model&&h._model.data?h._model.data:null,e){case"create_node":case"move_node":case"copy_node":if("move_node"!==e||-1===t.inArray(a.id,s.children)){if((l=this.get_rules(s)).max_children!==r&&-1!==l.max_children&&l.max_children===s.children.length)return this._data.core.last_error={error:"check",plugin:"types",id:"types_01",reason:"max_children prevents function: "+e,data:JSON.stringify({chk:e,pos:d,obj:!(!a||!a.id)&&a.id,par:!(!s||!s.id)&&s.id})},!1;if(l.valid_children!==r&&-1!==l.valid_children&&-1===t.inArray(a.type||"default",l.valid_children))return this._data.core.last_error={error:"check",plugin:"types",id:"types_02",reason:"valid_children prevents function: "+e,data:JSON.stringify({chk:e,pos:d,obj:!(!a||!a.id)&&a.id,par:!(!s||!s.id)&&s.id})},!1;if(h&&a.children_d&&a.parents){for(_=0,o=0,c=a.children_d.length;o<c;o++)_=Math.max(_,h[a.children_d[o]].parents.length);_=_-a.parents.length+1}(_<=0||_===r)&&(_=1);do{if(l.max_depth!==r&&-1!==l.max_depth&&l.max_depth<_)return this._data.core.last_error={error:"check",plugin:"types",id:"types_03",reason:"max_depth prevents function: "+e,data:JSON.stringify({chk:e,pos:d,obj:!(!a||!a.id)&&a.id,par:!(!s||!s.id)&&s.id})},!1;s=this.get_node(s.parent),l=this.get_rules(s),_++}while(s)}}return!0},this.get_rules=function(t){if(!(t=this.get_node(t)))return!1;var e=this.get_type(t,!0);return e.max_depth===r&&(e.max_depth=-1),e.max_children===r&&(e.max_children=-1),e.valid_children===r&&(e.valid_children=-1),e},this.get_type=function(e,r){return!!(e=this.get_node(e))&&(r?t.extend({type:e.type},this.settings.types[e.type]):e.type)},this.set_type=function(e,i){var a,s,d,n,l,_,o,c,h=this._model.data;if(t.isArray(e)){for(s=0,d=(e=e.slice()).length;s<d;s++)this.set_type(e[s],i);return!0}if(a=this.settings.types,e=this.get_node(e),!a[i]||!e)return!1;if((o=this.get_node(e,!0))&&o.length&&(c=o.children(".jstree-anchor")),n=e.type,l=this.get_icon(e),e.type=i,(!0===l||!a[n]||a[n].icon!==r&&l===a[n].icon)&&this.set_icon(e,a[i].icon===r||a[i].icon),a[n]&&a[n].li_attr!==r&&"object"==typeof a[n].li_attr)for(_ in a[n].li_attr)if(a[n].li_attr.hasOwnProperty(_)){if("id"===_)continue;"class"===_?(h[e.id].li_attr.class=(h[e.id].li_attr.class||"").replace(a[n].li_attr[_],""),o&&o.removeClass(a[n].li_attr[_])):h[e.id].li_attr[_]===a[n].li_attr[_]&&(h[e.id].li_attr[_]=null,o&&o.removeAttr(_))}if(a[n]&&a[n].a_attr!==r&&"object"==typeof a[n].a_attr)for(_ in a[n].a_attr)if(a[n].a_attr.hasOwnProperty(_)){if("id"===_)continue;"class"===_?(h[e.id].a_attr.class=(h[e.id].a_attr.class||"").replace(a[n].a_attr[_],""),c&&c.removeClass(a[n].a_attr[_])):h[e.id].a_attr[_]===a[n].a_attr[_]&&("href"===_?(h[e.id].a_attr[_]="#",c&&c.attr("href","#")):(delete h[e.id].a_attr[_],c&&c.removeAttr(_)))}if(a[i].li_attr!==r&&"object"==typeof a[i].li_attr)for(_ in a[i].li_attr)if(a[i].li_attr.hasOwnProperty(_)){if("id"===_)continue;h[e.id].li_attr[_]===r?(h[e.id].li_attr[_]=a[i].li_attr[_],o&&("class"===_?o.addClass(a[i].li_attr[_]):o.attr(_,a[i].li_attr[_]))):"class"===_&&(h[e.id].li_attr.class=a[i].li_attr[_]+" "+h[e.id].li_attr.class,o&&o.addClass(a[i].li_attr[_]))}if(a[i].a_attr!==r&&"object"==typeof a[i].a_attr)for(_ in a[i].a_attr)if(a[i].a_attr.hasOwnProperty(_)){if("id"===_)continue;h[e.id].a_attr[_]===r?(h[e.id].a_attr[_]=a[i].a_attr[_],c&&("class"===_?c.addClass(a[i].a_attr[_]):c.attr(_,a[i].a_attr[_]))):"href"===_&&"#"===h[e.id].a_attr[_]?(h[e.id].a_attr.href=a[i].a_attr.href,c&&c.attr("href",a[i].a_attr.href)):"class"===_&&(h[e.id].a_attr.class=a[i].a_attr.class+" "+h[e.id].a_attr.class,c&&c.addClass(a[i].a_attr[_]))}return!0}})});
//# sourceMappingURL=/sm/74068d6ce60e919650560ee92af5ea50b23c2ec972777a7eecfc02704d0f8158.map